---
import { Card, Subtitle, Title } from "@components/ui"
import { BaseLayout } from "@layouts"
import { GearService } from "@services"
export const prerender = false
const { slug } = Astro.params
if (!slug) return Astro.redirect("/404")
const bike = await GearService(Astro.locals.runtime.env.DB).getBySlug(slug)
if (!bike) return Astro.redirect("/404")
---
<BaseLayout title={`Bike - ${bike.name}`}>
  <Card>
    <Title>{bike.name}</Title>
    <Subtitle>{bike.frame_type}</Subtitle>
    <hr>
    <table>
      {bike.components.sort(function(a,b) { return a.type > b.type ? 1 : -1 }).map(function({ brand, model, type }) {
        return (
          <tr>
            <th>{type}</th>
            <td>{brand} {model}</td>
          </tr>
        )
      })}
    </table>
  </Card>
</BaseLayout>

<style>
  table {
    border: 1px black solid;
    border-collapse: collapse;
  }
  th, td {
    border: 1px black solid;  
    text-align: left;
    padding: 4px;
  }
</style>